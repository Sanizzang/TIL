### DES(Data Encryption Standard) 암호?

DES 알고리즘은 암호문을 작성할 때 사용하는 암호키와 암호문을 해독할 때 사용하는 해독키가 같다.

따라서 이 키는 절대로 외부에 유출되지 않도록 관리해야 하며 비밀키(Secret Key)라고 부른다.

또한 양쪽이 동일 키를 사용한다고 해서 대칭키(Symmetric Key)라고도 한다. 이처럼 외부 사용자에게
노출되지 않아야 하는 암호키로 암호화하는 알고리즘을 비공개키 알고리즘이라고 한다.

비공개키 방식의 DES(Data Encryption Standard) 알고리즘은 미국 정부가 개발하여 여러 하드웨어와 소프트웨어에서
사용되어 왔다. 대체 암호화와 위치 암호화를 복잡하게 조합하여 개발한 DES 알고리즘은 암호화를 64비트 단위로 수행하며,
암호키의 크기는 56비트이다.

### DES 암호 알고리즘 특징

DES는 평문을 64비트로 나눠 56비트의 키를 이용하여 다시 64비트의 암호문을 만들어 내는 암호 알고리즘이다.

이때 암호문은 16번의 반복을 통해 만들어지는데 이때 16번의 반복동안 라운드 함수를 적용하고 이때 라운드 함수에 적용디는 키는 라운드 키이다.

이때 라운드 키는 키 스케줄에 의해 라운드 키를 발생시킨다.

DES는 Feistel Cipher 방식으로 암호화를 한다. (AES는 SPN(Substitution-Permutation Network) 방식으로 암호화를 한다.)

### DES 암호 알고리즘 동작 과정

1. 먼저 64비트의 평문이 첫 라운드를 거치기 전, IP(initial permutation, 초기치환)를 거친다.
2. IP를 거친 후 나온 64비트 값은 각 L0와 R0로 32비트씩 나뉘어 들어간다.
3. R0에 해당하는 32비트는 각 키 스케줄에 의해 나온 첫번째 48번째 키와 F 함수에 들어가고 F함수는 결국 32비트를 도출해낸다.
4. 이렇게 생성된 32비트와 L0의 32비트를 XOR 해준다.
5. 마지막으로 생성된 32비트를 또 R1에 보내준다.

이 과정을 16라운드까지 반복해준다.

6. 마지막 라운드를 거칠때는 L과 R이 반대로 들어가게 된다.
7. 이후 IP의 역에 들어가게 되고 마지막으로 output인 64비트 암호문을 얻게된다.

### F 함수

1. 각 라운드마다 오른쪽(R)의 32비트가 E(expansion)을 거쳐 48비트가 된다.
2. 이렇게 얻은 48비트와 키 스케줄을 거친 키 48비트가 XOR을 거치고 F함수로 들어간다.
3. XOR로 얻는 48비트는 8부분으로 나뉘어 각각 6비트씩 S-BOX에 들어간다.
4. S-BOX에 들어갔다 나온 값들은 4비트로 나오게 되고 결국 모두 합치면 8\*4인 32비트가 나온다.
5. 결국 32비트는 P(permutation)을 거쳐 F함수의 결과인 32비트를 도출해낸다.

### 키 스케줄

처음 64비트 key는 PC1을 거ㅕ 56비트의 키가 된다. 이때 사용되지 않은 8비트는 패리티 비트로 사용된다.

56비트는 left, right로 28비트씩 반반 가는데 이때 각 라운드마다 키 회전 스케쥴에따라 왼쪽으로 1비트 혹은 2비트 회전하게 된다.
(1,2,9,16번째는 한번 쉬프트, 나머지는 두번 쉬프트한다.)

첫번째 키는 1번 쉬프트를 하고 두 부분을 합쳐 PC 2를 통과시켜 48비트가 된다.
두번째 키는 1번 쉬프트를 하고 두 부분을 합쳐 PC 2를 통과시켜 48비트가 된다.
세번째 키는 2번 쉬프트를 하고 두 부분을 합쳐 PC 2를 통과시켜 48비트가 된다.
...
열여섯번째 키는 1번 쉬프트를 하고 두 부분을 합쳐 PC 2를 통과시켜 48비트가 된다.

### DES 복호화(DES 취약점)

반대 방향으로. 16번째 키, 15번째 키, ... 를 이용해 16라운드를 다시 거친 뒤 IP의 역연산을 거치면 처음 평문을 얻을 수 있다.
